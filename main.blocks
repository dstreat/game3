<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="2Pl3E-O[HvT2EHuDH9?N">mySprite</variable></variables><block type="pxt-on-start" id="!qp-ah1w],2/8spg]eOc" collapsed="true" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="]gKLV6fTN9I$wf(oGfjQ" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let mySprite: Enemy = null" numlines="1" declaredvars="mySprite"></mutation><next><block type="typescript_statement" id="=BVw/LP;!K3?k6@mqTdi" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function createEnemy (img: Image, startLocation: tiles.Location) : Enemy {" line1="    const scene = game.currentScene();" line2="    const sprite = new Enemy(img)" line3="    sprite.setKind(SpriteKind.Enemy)" line4="    scene.physicsEngine.addSprite(sprite);" line5="    scene.createdHandlers" line6="        .filter(h =&gt; h.kind == SpriteKind.Enemy)" line7="        .forEach(h =&gt; h.handler(sprite));" line8="    tiles.placeOnTile(sprite, startLocation)" line9="    return sprite" line10="}" numlines="11"></mutation><next><block type="typescript_statement" id="VIAkL:6qn#Q^uTi{vi7H" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="class Enemy extends Sprite {" line1="    LastX: number;" line2="    LastY: number;" line3="    currAnimDir: number;" line4="" line5="    constructor(img: Image) {" line6="        super(img);" line7="        this.LastX = this.x;" line8="        this.LastY = this.y;" line9="        this.currAnimDir = 0;" line10="    }" line11="" line12="    on_update() {" line13="        if (this.LastX - this.x &lt; 0 &amp;&amp; this.currAnimDir != 1) {" line14="            animation.runImageAnimation(this, [img`" line15="                    f f f . . . . . . . . f f f . . " line16="                                c b b c f . . . . . . c c f f . " line17="                                . c b b c f . . . . . . c c f f " line18="                                . c c c b f . . . . . . c f c f " line19="                                . c c b b c f . c c . c c f f f " line20="                                . c b b c b f c c 3 c c 3 c f f " line21="                                . c b c c b f c b 3 c b 3 b f f " line22="                                . . c c c b b c b b b b b b c . " line23="                                . . . c c c c b b 1 b b b 1 c . " line24="                                . . . . c c b b b b b b b b b c " line25="                                . . . . f b b b b c b b b c b c " line26="                                . . . c f b b b b 1 f f f 1 b f " line27="                                . . c c f b b b b b b b b b b f " line28="                                . . . . f c b b b b b b b b f . " line29="                                . . . . . f c b b b b b b f . . " line30="                                . . . . . . f f f f f f f . . ." line31="                `, img`" line32="                    . . . . . . . . . . . f f f . . " line33="                                f f f . . . . . . . . c c f f f " line34="                                c b b c f . . . c c . . c c f f " line35="                                . c b b b f f c c 3 c c 3 c f f " line36="                                . c c c b b f c b 3 c b 3 b f f " line37="                                . c c b c b f c b b b b b b c . " line38="                                . c b b c b b c b b b b b b c . " line39="                                . c b c c c b b b 1 b b b 1 b c " line40="                                . . c c c c c b b b b b b b b c " line41="                                . . . c f b b b b c b b b c b f " line42="                                . . c c f b b b b 1 f f f 1 b f " line43="                                . . . . f c b b b b b b b b f . " line44="                                . . . . . f c b b b b b b f . . " line45="                                . . . . . . f f f f f f f . . . " line46="                                . . . . . . . . . . . . . . . . " line47="                                . . . . . . . . . . . . . . . ." line48="                `, img`" line49="                    . . . . . . . . . . . . . . . . " line50="                                . . . . . . . . c c . . c c . . " line51="                                . . . . . . c c c 3 c c 3 c . . " line52="                                . . . . . c c c b 3 c b 3 b c . " line53="                                . . . . f f b b b b b b b b c . " line54="                                . . . . f f b b b b b b b b c c " line55="                                . . . f f f c b b 1 b b b 1 b c " line56="                                . . . f f f f b b b b b b b b c " line57="                                . . . b b b c c b c b b b c b f " line58="                                . . . c c c c f b 1 f f f 1 b f " line59="                                . . . c c b b f b b b b b b f . " line60="                                . . . c b b c c b b b b b f c c " line61="                                . . c b b c c f f f f f f c c c " line62="                                . c c c c c . . . . . . c c c . " line63="                                c c c c . . . . . . . c c c . . " line64="                                . . . . . . . . . . . . . . . ." line65="                `, img`" line66="                    . f f f . . . . . . . . f f f . " line67="                                . c b b c f . . . . . . . c f f " line68="                                . . c b b c f . . . . . . c c f " line69="                                . . c c c b f . . . . . . . f c " line70="                                . . c c b b f f . . . . . f f c " line71="                                . . c b b c b f c c . c c f f f " line72="                                . . c b c c b f c c c c c f f f " line73="                                . . . c c c b c b 3 c c 3 c f . " line74="                                . . . c c c c b b 3 c b 3 b c . " line75="                                . . . . c c b b b b b b b b c c " line76="                                . . . c f b b b b 1 b b b 1 b c " line77="                                . . c c f b b b b b b b b b b f " line78="                                . . . . f b b b b c b b b c b f " line79="                                . . . . f c b b b 1 f f f 1 f . " line80="                                . . . . . f c b b b b b b f . . " line81="                                . . . . . . f f f f f f f . . ." line82="                `], 100, true)" line83="            this.currAnimDir = 1" line84="        } else if (this.LastX - this.x &gt; 0 &amp;&amp; this.currAnimDir != 2) {" line85="            animation.runImageAnimation(this, [img`" line86="                    . . f f f . . . . . . . . f f f " line87="                                . f f c c . . . . . . f c b b c " line88="                                f f c c . . . . . . f c b b c . " line89="                                f c f c . . . . . . f b c c c . " line90="                                f f f c c . c c . f c b b c c . " line91="                                f f c 3 c c 3 c c f b c b b c . " line92="                                f f b 3 b c 3 b c f b c c b c . " line93="                                . c b b b b b b c b b c c c . . " line94="                                . c 1 b b b 1 b b c c c c . . . " line95="                                c b b b b b b b b b c c . . . . " line96="                                c b c b b b c b b b b f . . . . " line97="                                f b 1 f f f 1 b b b b f c . . . " line98="                                f b b b b b b b b b b f c c . . " line99="                                . f b b b b b b b b c f . . . . " line100="                                . . f b b b b b b c f . . . . . " line101="                                . . . f f f f f f f . . . . . ." line102="                `, img`" line103="                    . . f f f . . . . . . . . . . . " line104="                                f f f c c . . . . . . . . f f f " line105="                                f f c c . . c c . . . f c b b c " line106="                                f f c 3 c c 3 c c f f b b b c . " line107="                                f f b 3 b c 3 b c f b b c c c . " line108="                                . c b b b b b b c f b c b c c . " line109="                                . c b b b b b b c b b c b b c . " line110="                                c b 1 b b b 1 b b b c c c b c . " line111="                                c b b b b b b b b c c c c c . . " line112="                                f b c b b b c b b b b f c . . . " line113="                                f b 1 f f f 1 b b b b f c c . . " line114="                                . f b b b b b b b b c f . . . . " line115="                                . . f b b b b b b c f . . . . . " line116="                                . . . f f f f f f f . . . . . . " line117="                                . . . . . . . . . . . . . . . . " line118="                                . . . . . . . . . . . . . . . ." line119="                `, img`" line120="                    . . . . . . . . . . . . . . . . " line121="                                . . c c . . c c . . . . . . . . " line122="                                . . c 3 c c 3 c c c . . . . . . " line123="                                . c b 3 b c 3 b c c c . . . . . " line124="                                . c b b b b b b b b f f . . . . " line125="                                c c b b b b b b b b f f . . . . " line126="                                c b 1 b b b 1 b b c f f f . . . " line127="                                c b b b b b b b b f f f f . . . " line128="                                f b c b b b c b c c b b b . . . " line129="                                f b 1 f f f 1 b f c c c c . . . " line130="                                . f b b b b b b f b b c c . . . " line131="                                c c f b b b b b c c b b c . . . " line132="                                c c c f f f f f f c c b b c . . " line133="                                . c c c . . . . . . c c c c c . " line134="                                . . c c c . . . . . . . c c c c " line135="                                . . . . . . . . . . . . . . . ." line136="                `, img`" line137="                    . f f f . . . . . . . . f f f . " line138="                                f f c . . . . . . . f c b b c . " line139="                                f c c . . . . . . f c b b c . . " line140="                                c f . . . . . . . f b c c c . . " line141="                                c f f . . . . . f f b b c c . . " line142="                                f f f c c . c c f b c b b c . . " line143="                                f f f c c c c c f b c c b c . . " line144="                                . f c 3 c c 3 b c b c c c . . . " line145="                                . c b 3 b c 3 b b c c c c . . . " line146="                                c c b b b b b b b b c c . . . . " line147="                                c b 1 b b b 1 b b b b f c . . . " line148="                                f b b b b b b b b b b f c c . . " line149="                                f b c b b b c b b b b f . . . . " line150="                                . f 1 f f f 1 b b b c f . . . . " line151="                                . . f b b b b b b c f . . . . . " line152="                                . . . f f f f f f f . . . . . ." line153="                `], 100, true)" line154="            this.currAnimDir = 2" line155="        }" line156="" line157="        this.LastX = this.x" line158="        this.LastY = this.y" line159="    }" line160="}" numlines="161"></mutation><next><block type="set_current_tilemap" id="]kZ%^Q1B8YcT%1E4Fh/S"><value name="tilemap"><shadow type="tiles_tilemap_editor" id="t}.34DaKfUJ[B,_iLVW5"><field name="tilemap">tilemap`level1`</field><data>{"commentRefs":[],"fieldData":{"tilemap":"level1"}}</data></shadow></value><next><block type="typescript_statement" id="`A%Sp=7(8X7c[;jG$dsf" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="mySprite = createEnemy(img`" line1="    . . f f f . . . . . . . . f f f " line2="    . f f c c . . . . . . f c b b c " line3="    f f c c . . . . . . f c b b c . " line4="    f c f c . . . . . . f b c c c . " line5="    f f f c c . c c . f c b b c c . " line6="    f f c 3 c c 3 c c f b c b b c . " line7="    f f b 3 b c 3 b c f b c c b c . " line8="    . c b b b b b b c b b c c c . . " line9="    . c 1 b b b 1 b b c c c c . . . " line10="    c b b b b b b b b b c c . . . . " line11="    c b c b b b c b b b b f . . . . " line12="    f b 1 f f f 1 b b b b f c . . . " line13="    f b b b b b b b b b b f c c . . " line14="    . f b b b b b b b b c f . . . . " line15="    . . f b b b b b b c f . . . . . " line16="    . . . f f f f f f f . . . . . . " line17="    `, tiles.getTileLocation(8, 2))" numlines="18"></mutation><next><block type="run_movement_animation" id="fNrOlQyUMwBa$(.CP@Q!"><value name="sprite"><shadow type="variables_get" id="H{r9LA#={shE;:Jd2hif"><field name="VAR" id="2Pl3E-O[HvT2EHuDH9?N">mySprite</field></shadow></value><value name="pathString"><shadow type="animation_path"></shadow><block type="text" id="itS^@iA,*sQBw4|Nqr75"><field name="TEXT">h -48 h 48</field></block></value><value name="duration"><shadow type="timePicker" id="sZr%dT?4QsiGK+2)6DNW"><field name="ms">4000</field></shadow></value><value name="loop"><shadow type="toggleOnOff" id="QMgzvE2[*7[YU3u5CR:b"><field name="on">true</field></shadow></value><next><block type="typescript_statement" id="|NVM=,cDQ{b{Ok%1p-[T" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="game.onUpdateInterval(33, on_update_interval)" numlines="1"></mutation></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id=";`@|33sa!u}33CBp,R^B" x="748" y="20"><mutation name="on_update_interval" functionid="z4e_=AT^{V;-Et%Y@UE^"></mutation><field name="function_name">on_update_interval</field><statement name="STACK"><block type="typescript_statement" id="_.JTJ?TE2aMYzXK$4@$p" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="mySprite.on_update()" numlines="1"></mutation></block></statement></block></xml>